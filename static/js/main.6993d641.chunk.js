(this["webpackJsonpreact-three-minecraft"]=this["webpackJsonpreact-three-minecraft"]||[]).push([[0],{43:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(4),c=n.n(r),a=n(28),o=n.n(a),i=(n(43),n(12)),u=n(18),s=n(51),j=n(26),b=n(19),f=n(7),d=n(5),O=n(8),m=n.p+"static/media/grass.eb5fc8eb.jpg",p=n(11),l=function(e){var t=Object(u.c)((function(){return Object(d.a)({rotation:[-Math.PI/2,0,0]},e)})),n=Object(O.a)(t,1)[0],r=(new f.TextureLoader).load(m);return r.wrapS=f.RepeatWrapping,r.wrapT=f.RepeatWrapping,r.repeat.set(240,240),Object(p.jsxs)("mesh",{ref:n,receiveShadow:!0,children:[Object(p.jsx)("planeBufferGeometry",{attach:"geometry",args:[1009,1e3]}),Object(p.jsx)("meshStandardMaterial",{map:r,attach:"material",color:"green"})]})},v=function(e){var t=Object(r.useRef)();Object(j.d)().setDefaultCamera;return Object(p.jsx)("perspectiveCamera",Object(d.a)({ref:t},e))},h=n(38);Object(j.b)({PointerLockControlsImpl:h.a});var x=function(e){var t=Object(j.d)(),n=t.camera,c=t.gl,a=Object(r.useRef)();return Object(r.useEffect)((function(){document.addEventListener("click",(function(){a.current.lock()}))}),[]),Object(p.jsx)("pointerLockControlsImpl",Object(d.a)({ref:a,args:[n,c.domElement]},e))},y=n(10);function g(e){return{KeyW:"moveForward",KeyS:"moveBackward",KeyA:"moveLeft",KeyD:"moveRight",Space:"jump"}[e]}var w=function(e){var t=Object(j.d)().camera,n=function(){var e=Object(r.useState)({moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,jump:!1}),t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=function(e){c((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(y.a)({},g(e.code),!0))}))},t=function(e){c((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(y.a)({},g(e.code),!1))}))};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),n}(),c=n.moveForward,a=n.moveBackward,o=n.moveLeft,i=n.moveRight,s=n.jump,b=Object(u.d)((function(){return Object(d.a)({mass:1,type:"Dynamic",position:[0,10,0]},e)})),m=Object(O.a)(b,2),l=m[0],v=m[1],h=Object(r.useRef)([0,0,0]);return Object(r.useEffect)((function(){v.velocity.subscribe((function(e){return h.current=e}))}),[v.velocity]),Object(j.c)((function(){t.position.copy(l.current.position);var e=new f.Vector3,n=new f.Vector3(0,0,Number(a)-Number(c)),r=new f.Vector3(Number(o)-Number(i),0,0);e.subVectors(n,r).normalize().multiplyScalar(5).applyEuler(t.rotation),v.velocity.set(e.x,h.current[1],e.z),s&&Math.abs(h.current[1].toFixed(2))<.05&&v.velocity.set(h.current[0],10,h.current[2])})),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(x,{}),Object(p.jsx)("mesh",{ref:l})]})},L=n.p+"static/media/dirt.59ed3279.jpg",k=n(39),S=Object(b.b)({key:"cubes",default:[]}),E=function(e){var t=Object(r.useState)(null),n=Object(O.a)(t,2),c=n[0],a=n[1],o=function(){var e=Object(b.d)(S);return function(t,n,r){return e((function(e){return[].concat(Object(i.a)(e),[Object(p.jsx)(E,{position:[t,n,r]},Object(k.a)())])}))}}(),s=(new f.TextureLoader).load(L),j=Object(u.b)((function(){return Object(d.a)({type:"Static"},e)})),m=Object(O.a)(j,1)[0];return Object(p.jsxs)("mesh",{ref:m,onPointerMove:function(e){e.stopPropagation(),a(Math.floor(e.faceIndex/2))},onPointerOut:function(){return a(null)},onClick:function(e){e.stopPropagation();var t=Math.floor(e.faceIndex/2),n=m.current.position,r=n.x,c=n.y,a=n.z;switch(t){case 4:return void o(r,c,a+1);case 2:return void o(r,c+1,a);case 1:return void o(r-1,c,a);case 5:return void o(r,c,a-1);case 3:return void o(r,c-1,a);default:return void o(r+1,c,a)}},children:[Object(i.a)(Array(6)).map((function(e,t){return Object(p.jsx)("meshStandardMaterial",{attachArray:"material",map:s,color:c===t?"grey":"white"},t)})),Object(p.jsx)("boxBufferGeometry",{attach:"geometry"})]})},F=function(){var e=Object(b.c)(S);return[Object(p.jsx)(E,{position:[0,.5,-10]})].concat(Object(i.a)(e))},M=function(){return Object(p.jsx)(j.a,{shadowMap:!0,sRGB:!0,gl:{alpha:!1},children:Object(p.jsxs)(b.a,{children:[Object(p.jsx)(v,{}),Object(p.jsx)(s.a,{sunPosition:new f.Vector3(100,10,100)}),Object(p.jsx)("ambientLight",{intensity:.3}),Object(p.jsx)("pointLight",{castShadow:!0,intensity:.8,position:[100,100,100]}),Object(p.jsxs)(u.a,{gravity:[0,-30,0],children:[Object(p.jsx)(l,{}),Object(p.jsx)(w,{}),Object(p.jsx)(F,{})]})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(M,{})}),document.getElementById("root")),P()}},[[48,1,2]]]);
//# sourceMappingURL=main.6993d641.chunk.js.map